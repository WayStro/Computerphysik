---
title: "Abgabe 2 Verfahrens- und Maschinenfehler"
author: "Wayne Ströbel, Silas Müller"
date: "5/5/2021"
output: pdf_document
---

```{r setup, include=FALSE}
library(knitr)
library(Rcpp)
knitr::opts_chunk$set(echo = TRUE)
```


# Verfahrens- und Maschinenfehler

Wir wollen anhand des Beispiels der numerischen Differentiation die bei praktischen Anwendungen häufig gegenläufig auftretenden Einflüsse von Verfahrens- und Maschinenfehler empirisch untersuchen. Wir betrachte die Ableitung der folgenden Testfunktion:

\begin{equation}
\label{eq:f}
f(x) = e^x
\end{equation}

an der Stelle $x = -1$. 


## Zwei-Punkt-Formel

Zuerst wollen wir die Ableitung mit der Zwei-Punkt-Formel bestimmen:

\begin{equation}
f^\prime(x_i) = \frac{f(x_i + h) - f(x_i)}{h}
\end{equation}

mit $x_i = -1$ und $h$ wählbar. 

Diese Formel können wir nun wie folgt in C implementieren:
```{Rcpp}
#include <stdlib.h>
#include <stdio.h>
#include <math.h>

//[[Rcpp::export]]
double Maschinenfehler_Double(){
  double k = 1;
  int i = 22;
  double x;
  while (k == 1)
  {
    x += 1/(pow(10, i));
    k += x;
  }
  return x;
}

//[[Rcpp::export]]
void PPAbleitung_expd(double h,double x, double g, double* Werte_double){
  
  int temp = h / g;
  double Maschinenfehler = Maschinenfehler_Double();

  for (int i = 0; i < temp; i += 5){
    Werte_double[i] = h - i*g; 
    Werte_double[i+1] = (exp(x+(h - i*g))-exp(x))/(h - i*g);
    Werte_double[i+2] = (exp(x+(h - i*g))-exp(x))/(h - i*g)-exp(x);
    Werte_double[i+3] = 1 / (2*(h - i*g)) * 0.8164965809 * Maschinenfehler * exp(x);
    Werte_double[i+4] = Werte_double[i+2] - Werte_double[i+3];

  }
}
```
```{r}
Werte_Double


```




## Drei-Punkt-Formel

```{Rcpp}
#include <Rcpp.h>
#include <stdlib.h>
#include <stdio.h>
#include <math.h>


//[[Rcpp::export]]
double PPPAbleitung_expd(double x, double g){
  double z;
  double f;
  for (double h=1; h>g;h=h-g){
    z=1/(2*h)*(exp(x+h)-exp(x-h));
    f=z-exp(x);
    }
 return z;
}

//[[Rcpp::export]]
float PPPAbleitung_expf(float x, float g){
  float z;
  float f;
  for (float h=1; h>g;h=h-g){
    z=1/(2*h)*(exp(x+h)-exp(x-h));
    f=z-exp(x);
  }
  return z;
}

```




